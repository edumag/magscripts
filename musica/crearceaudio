#!/bin/bash

# Este script permite automatizar la creación de un CD de audio.
# Para ello se utilizara cdda2wav y cdrecord.


if [ -d /mnt/win_d/mp3/cdTemp ] ; then
	echo Directorio existe
else
	mkdir /mnt/win_d/mp3/cdTemp
	echo directorio creado
fi

cd /mnt/win_d/mp3/cdTemp

function menuPrincipal {
clear
echo -e "

   <>-------------------------------------------------------------------<>

                        Creación de un CD de musica

   <>-------------------------------------------------------------------<>


                  1- Obtener una canción de un Cd de musica.
                  2- Convertir un fichero mp3.
                  3- Ver el contenido del directorio Temporal.
                  4- Baciar el directorio Temporal.
                  5- Comenzar la Grabación.
                  6- Imprimir Lista de Canciones.
                  7- Borrar CDRW.
                  0- Salir.

   <>--------------------------------------------------------------------<>

"
while 
read opcionMenuPrincipal
do
	case "$opcionMenuPrincipal" in

		"1") obtenerCd ;;
		"2") obtenerMp3 ;;
		"3") verDirectorio ;;
		"4") baciarDirectorio ;;
		"5") comenzarGrabar ;;
		"6") imprimirCanciones ;;
		"7") borrarCdrw ;;
		"0") exit ;;
		"") continue ;;
	esac
done


		
} # Finaliza menuPrincipal


function obtenerCd {

clear

echo -e "

   <>----------------------------------------------------------------------<>

                    Obtener una canci-on de un Cd de musica

   <>----------------------------------------------------------------------<>


      1- Coloca el cd de musica que tiene la canciÃ³n que quieres  grabar. 
         Se  tiene  que poner en el cd de arriba.

      2- Dame el numero de cancion, y aprieta ENTER.

      3- Dame el nombre que quieras ponerle  a la  canciÃ³n, ( Es importante 
         que no tenga  espacios) y dale a ENTER, para empezar  a  grabarla
         en el disco duro.
			
   <>-----------------------------------------------------------------------<>

											"

echo -e "
Numero de canción: \c"
read nCancion

echo -e "Nombre de la canción: \c"
read nombreCancion
clear

cdda2wav -Q -D /dev/hdd -s -x -t $nCancion $nombreCancion

menuPrincipal

} # Termina obtenerCd


function comenzarGrabar {
clear

echo -e " 


<>--------------------------------------------------------------------<>

                          Grabar Cd de musica

<>--------------------------------------------------------------------<>




 Para asegurarse de que no salga mal la grabación es importante que no
 haya otros programas funcionando. Si es asi es mejor cerrarlos ahora 
 antes de continuar.

 Para iniciar la grabación coloca un cd grabable en el cd de abajo, y 
 aprieta ENTER.


"
read empezarGrabar
clear

cdrecord -v -useinfo -audio *.wav

echo "Finalizada la grbación, presione ENTER."
read enter
menuPrincipal

} # Finaliza comenzarGrabar

function verDirectorio {

clear
sdir /mnt/win_d/mp3/cdTemp

echo -e "

Presiona ENTER para salir.
"
read presiona
menuPrincipal

} # Finalizando verDirectorio

function baciarDirectorio {
clear 
sdir /mnt/win_d/mp3/cdTemp
echo -e "
Seguro que quieres borrar todas las canciones (s/n): \c"
read seguro
if [ "$seguro" = "s" ] ; then 
rm /mnt/win_d/mp3/cdTemp/*
else 
	echo Borrado de canciones CANCELADO
	read cancelado
fi

menuPrincipal
} # Finalizando baciarDirectorio


function borrarCdrw {

clear
echo -e "

   Esta Operación borrara todo el disco que coloques en la disquetera

	¿Quieres continuar (s/n): \c"

read seguirBorrado

if [ "$seguirBorrado" = "s" ] ; then
	clear 
	cdrecord -v -blank fast && menuPrincipal
	
else
	menuPrincipal
fi
menuPrincipal

} # Finalizando borrarCdrw

function obtenerMp3 {
clear
echo -e "

<>---------------------------------------------------------------<>

                      Obtener un fichero mp3

<>---------------------------------------------------------------<>


  Para pasar los mp3 a wav y poder grabarlos en un cd de musica
  es necesario primero copiarlos al directorio temporal

(0) - Para salir.

Nombre del fichero mp3: \c"
read ficheroMp3

if [ "$ficheroMp3" = "0" ] ; then
	menuPrincipal
else
menuPrincipal
fi
menuPrincipal

} # Finalizando obtenerMp3

function imprimirCanciones {

ls | pr -T | lpr

menuPrincipal

}
menuPrincipal
	
	


